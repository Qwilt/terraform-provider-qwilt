# Qwilt Tests Execution Guidlines

Running Qwilt tests is creating real resources in qwilt backend.
It is for internal use only, on DEV environments only.
In order to run these tests successfully developer should:
1. work with a full cdn environment, including an operational full-validator
2. configure sites MS, lifecycle-controller MS with test-env timeouts and flags to allow fast successful publish operations (further instructions below)
3. export QCDN_XAPI_TOKEN env variable with an appropriate token generated by the tested env.
4. default env is "kan11". if developer wants to use a different test env he should set the prefix in 'NewEndpointBuilder' and re-install the plugin.


To start, you may wish to define your API token for authentication, as well as env_type:
```
$ export QCDN_XAPI_TOKEN=<XXXXXXXXXXXXXXXXXX>
$ export QCDN_ENVTYPE=dev
```

To run all the tests:
```
$ make testacc
```

To run a specific test:
```
$ TF_ACC_LOG=DEBUG TF_ACC=1 go test -v ./... -run TestCertificateResource
```


`
## About Acceptance Test:
For now we do not have a CI for releasing this plugin.
It is the developer responsibility to run these acceptance tests before releasing a new version.
Dangling resources may remain in QC causing tests to fail.
User might need to manually delete those resources from the backend.